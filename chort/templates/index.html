{% extends 'base.html' %}
{% load static %}

{% block content %}
  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex align-items-center">

    <div class="container">
      <div class="row">
        <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1" data-aos="fade-up" data-aos-delay="200">
          <h1>Better Solutions For Your Business</h1>
          <h2>We are team of talented designers making websites with Bootstrap</h2>
          <div class="d-flex justify-content-center justify-content-lg-start">
            <a href="#url" class="btn-get-started scrollto">Get Started</a>
            <a href="https://www.youtube.com/watch?v=jDDaplaOz7Q" class="glightbox btn-watch-video"><i class="bi bi-play-circle"></i><span>Watch Video</span></a>
          </div>
        </div>
        <div class="col-lg-6 order-1 order-lg-2 hero-img" data-aos="zoom-in" data-aos-delay="200">
          <img src="{% static 'assets/img/hero-img.png' %}" class="img-fluid animated" alt="">
        </div>
      </div>
    </div>

  </section><!-- End Hero -->

  <main id="main">

<!-- ======= Footer ======= -->

<footer id="footer">
    <div class="footer-newsletter" id='url'>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <h4>Shorten your link now!</h4>
            <p>Simplify your links and share more efficiently with our easy-to-use link shortener.</p>
            <form action="{% url 'link' %}" method="POST">
              {% csrf_token %}
              <input type="text" id="url-link" name="url" placeholder="Shorten your link">
              <input type="button" onclick="sendLink()" value="Shorten">
            </form>


           
            <ul class="list-group mt-2 p-2 list-short-links" id="list-links">
              
              <ul>

                <script>
                  if(!localStorage.getItem('urls')){
                    localStorage.setItem('urls',JSON.stringify( {urls: []}))
                  }
    
                  async function sendLink (e){
                   
                    const data = {
                      url: document.getElementById('url-link').value
                    }
                    if(data.url.length > 5){
                        await fetch('{% url "link" %}' ,{
                        method: 'POST', 
                        headers: {
                          'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                  
                      }).then(response => response.json()
                      ).then(result =>{
                        document.getElementById('url-link').value = ""
                        document.getElementById('list-links').insertAdjacentHTML("afterbegin",`
                        <li class="list-group-item" >
                          <div class="me-auto">
                            <div class="fw-bold mb-2 bg-light rounded-pill p-1 px-3 text-center border">${result.message}</div>
                            ${data.url}
                          </div>
                          <div class="mt-2">
                            <button onclick="(copy(text-${result.id}))" class="btn btn-primary btn-sm rounded-pill">Copy</button>
                          </div>
                        </li>
                        `)
    
                        const old = JSON.parse(localStorage.getItem('urls')).urls;
                        const newd = {oldurl:data.url, newurl: result.message, id: result.id } 
    
                        
            
                        localStorage.setItem('urls', JSON.stringify({urls: [...old, newd]}) )
    
                      }).catch(error=>{
                        console.log(error)
                      })
                    }else{
                      
                    }
    
    
                  }
    
                  
                  const data = JSON.parse(localStorage.getItem('urls')).urls;

                  if(data.length == 0){
                    document.getElementById('list-links').insertAdjacentHTML("afterbegin",'<h3 class="text-center py-3">No URLs</h3>')
                  }
                  data.map(item=>{
                    document.getElementById('list-links').insertAdjacentHTML("afterbegin",`
                      <li class="list-group-item" >
                          <div class="me-auto">
                            <div class="fw-bold mb-2 bg-light rounded-pill p-1 px-3 text-center border">${item.newurl}</div>
                            ${item.oldurl}
                          </div>
                          <div class="mt-2">
                            <button onclick="(copy(text-${item.id}))" class="btn btn-primary btn-sm rounded-pill">Copy</button>
                          </div>
                        </li>
                      `)
                  })
                </script>
    


          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- End Footer -->
    {% include 'components/about.html' %}

    <!-- ======= Why Us Section ======= -->
    <section id="why-us" class="why-us section-bg">
      <div class="container-fluid" data-aos="fade-up">

        <div class="row">

          <div class="col-lg-7 d-flex flex-column justify-content-center align-items-stretch  order-2 order-lg-1">

            <div class="content">
              <h3>Eum ipsam laborum deleniti <strong>velit pariatur architecto aut nihil</strong></h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Duis aute irure dolor in reprehenderit
              </p>
            </div>

            <div class="accordion-list">
              <ul>
                <li>
                  <a data-bs-toggle="collapse" class="collapse" data-bs-target="#accordion-list-1"><span>01</span> Non consectetur a erat nam at lectus urna duis? <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                  <div id="accordion-list-1" class="collapse show" data-bs-parent=".accordion-list">
                    <p>
                      Feugiat pretium nibh ipsum consequat. Tempus iaculis urna id volutpat lacus laoreet non curabitur gravida. Venenatis lectus magna fringilla urna porttitor rhoncus dolor purus non.
                    </p>
                  </div>
                </li>

                <li>
                  <a data-bs-toggle="collapse" data-bs-target="#accordion-list-2" class="collapsed"><span>02</span> Feugiat scelerisque varius morbi enim nunc? <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                  <div id="accordion-list-2" class="collapse" data-bs-parent=".accordion-list">
                    <p>
                      Dolor sit amet consectetur adipiscing elit pellentesque habitant morbi. Id interdum velit laoreet id donec ultrices. Fringilla phasellus faucibus scelerisque eleifend donec pretium. Est pellentesque elit ullamcorper dignissim. Mauris ultrices eros in cursus turpis massa tincidunt dui.
                    </p>
                  </div>
                </li>

                <li>
                  <a data-bs-toggle="collapse" data-bs-target="#accordion-list-3" class="collapsed"><span>03</span> Dolor sit amet consectetur adipiscing elit? <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                  <div id="accordion-list-3" class="collapse" data-bs-parent=".accordion-list">
                    <p>
                      Eleifend mi in nulla posuere sollicitudin aliquam ultrices sagittis orci. Faucibus pulvinar elementum integer enim. Sem nulla pharetra diam sit amet nisl suscipit. Rutrum tellus pellentesque eu tincidunt. Lectus urna duis convallis convallis tellus. Urna molestie at elementum eu facilisis sed odio morbi quis
                    </p>
                  </div>
                </li>

              </ul>
            </div>

          </div>

          <div class="col-lg-5 align-items-stretch order-1 order-lg-2 img" style='background-image: url("{% static 'assets/img/why-us.png' %}");' data-aos="zoom-in" data-aos-delay="150">&nbsp;</div>
        </div>

      </div>
    </section>
    <!-- End Why Us Section -->

    {% include 'components/services.html' %}
    <!-- ======= Cta Section ======= -->
    <section id="cta" class="cta">
      <div class="container" data-aos="zoom-in">

        <div class="row">
          <div class="col-lg-9 text-center text-lg-start">
            <h3>Call To Action</h3>
            <p> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
          </div>
          <div class="col-lg-3 cta-btn-container text-center">
            <a class="cta-btn align-middle" href="#">Call To Action</a>
          </div>
        </div>

      </div>
    </section>



    <!-- End Cta Section -->
    {% include 'components/team.html' %}
    {% include 'components/pricing.html' %}
    {% include 'components/questions.html' %}
    {% include 'components/contact.html' %}
  </main>
  <!-- End #main -->

{% endblock content %}